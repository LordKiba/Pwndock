version: '3.3'

volumes:
  traefik-ssl-certs:
    driver: local

services:
  traefik:
    image: "traefik:v2.5" 
    container_name: "traefik"
    hostname: proxy

    environment:
      - TZ=America/New_York

    ports:
      - "80:80"
      - "443:443"

    volumes:
      - /etc/traefik:/etc/traefik # path to local traefik config file
      - traefik-ssl-certs:/ssl-certs
      - /var/run/docker.sock:/var/run/docker.sock:ro # access to local docker socket to monitor docker labels 

    labels:
      - traefik.enable=true
      - traefik.http.routers.traefik-dashboard.entrypoints=websecure
      - traefik.http.routers.traefik-dashboard.rule=Host(`traefik.tools.local`)
      - traefik.http.routers.traefik-dashboard.tls=true
      - traefik.http.routers.traefik-dashboard.service=traefik-dashboard
      - traefik.http.services.traefik-dashboard.loadbalancer.server.port=8080  
      - com.centurylinklabs.watchtower.enable=true # Enable image update from watchtower 